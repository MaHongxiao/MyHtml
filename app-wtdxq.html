<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>业务单详情 - 移动端</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        /* 基础设置 */
        body {
            background-color: #F5F6F7;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            color: #1F2329;
            padding-bottom: 90px;
            -webkit-tap-highlight-color: transparent;
        }

        /* 隐藏滚动条 */
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* 通用卡片 */
        .card {
            background: #FFFFFF;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.03);
        }

        /* 进度环 */
        .circle-progress {
            width: 36px; height: 36px;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            position: relative;
        }
        .circle-progress::before {
            content: ""; width: 28px; height: 28px;
            background: #fff; border-radius: 50%; position: absolute;
        }
        .circle-text { position: relative; font-size: 10px; font-weight: bold; color: #1F2329; }

        /* 底部弹窗动画 */
        #matchModal { transition: opacity 0.3s ease; }
        #matchContent { transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); transform: translateY(100%); }
        #matchModal.active { opacity: 1; pointer-events: auto; }
        #matchModal.active #matchContent { transform: translateY(0); }

        /* Tab激活样式 */
        .tab-btn.active {
            color: #3370FF;
            font-weight: 600;
            border-bottom: 2px solid #3370FF;
        }
        
        /* 选中框样式 */
        .checkbox-custom:checked {
            background-color: #3370FF;
            border-color: #3370FF;
            background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e");
        }
    </style>
</head>
<body>

    <div class="bg-white sticky top-0 z-40 px-4 py-3 flex items-center justify-between shadow-sm">
        <div class="flex items-center gap-3">
            <i class="fas fa-chevron-left text-gray-600 text-lg"></i>
            <h1 class="text-lg font-bold text-gray-800">业务单详情</h1>
        </div>
        <div class="flex gap-4 text-gray-600">
            <i class="fas fa-search"></i>
            <i class="fas fa-ellipsis-h"></i>
        </div>
    </div>

    <div class="p-3">
        <div class="card relative overflow-hidden">
            <div class="absolute top-0 right-0 bg-orange-50 text-orange-500 px-3 py-1 rounded-bl-lg text-xs font-bold border-l border-b border-orange-100">
                <i class="fas fa-hourglass-half mr-1"></i>待确认
            </div>

            <div class="mb-3">
                <span class="text-gray-500 text-xs block mb-1">委托单号</span>
                <div class="text-xl font-bold text-gray-900 flex items-center gap-2">
                    WT20260126001
                    <i class="far fa-copy text-gray-400 text-xs"></i>
                </div>
            </div>

            <div class="grid grid-cols-1 gap-3 text-sm mt-3 border-t border-gray-100 pt-3">
                <div class="flex justify-between">
                    <span class="text-gray-500">客户名称</span>
                    <span class="text-gray-900 font-medium truncate w-56 text-right">华为技术有限公司</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-500">关联合同</span>
                    <span class="text-blue-600 font-medium">CT20260115-001</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-gray-500">销售/跟单</span>
                    <div class="flex items-center gap-2">
                        <div class="w-6 h-6 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-xs font-bold">张</div>
                        <span class="text-gray-900 font-medium">张三 (销售一部)</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="flex gap-2 mb-3">
            <div class="card flex-1 mb-0 bg-blue-50/50 border border-blue-100 flex flex-col justify-center">
                <span class="text-xs text-gray-500 mb-1">委托单金额 (CNY)</span>
                <span class="text-xl font-bold text-gray-900">¥ 10,000.00</span>
                <div class="mt-2 w-full bg-gray-200 h-1.5 rounded-full overflow-hidden">
                    <div class="bg-green-500 h-full w-[40%]"></div>
                </div>
                <div class="flex justify-between text-[10px] text-gray-500 mt-1">
                    <span>已配: ¥4k</span>
                    <span class="text-orange-500">待配: ¥6k</span>
                </div>
            </div>
            
            <div class="card flex-1 mb-0 flex justify-between items-center px-3 py-2">
                <div class="flex flex-col items-center gap-1">
                    <div class="circle-progress" style="background: conic-gradient(#FA8C16 40%, #f0f0f0 0);">
                        <div class="circle-text">2/5</div>
                    </div>
                    <span class="text-[10px] text-gray-500">确认</span>
                </div>
                <div class="flex flex-col items-center gap-1">
                    <div class="circle-progress" style="background: conic-gradient(#3370FF 60%, #f0f0f0 0);">
                        <div class="circle-text">3/5</div>
                    </div>
                    <span class="text-[10px] text-gray-500">出证</span>
                </div>
                <div class="flex flex-col items-center gap-1">
                    <div class="circle-progress" style="background: conic-gradient(#52C41A 40%, #f0f0f0 0);">
                        <div class="circle-text">2/5</div>
                    </div>
                    <span class="text-[10px] text-gray-500">出库</span>
                </div>
            </div>
        </div>

        <div class="sticky top-[56px] z-30 bg-[#F5F6F7] pb-2">
            <div class="flex overflow-x-auto hide-scrollbar border-b border-gray-200 bg-white rounded-lg shadow-sm">
                <div onclick="switchTab('samples')" class="tab-btn active px-4 py-3 text-sm text-gray-500 whitespace-nowrap cursor-pointer">样品信息(23)</div>
                <div onclick="switchTab('basic')" class="tab-btn px-4 py-3 text-sm text-gray-500 whitespace-nowrap cursor-pointer">基本信息</div>
                <div onclick="switchTab('services')" class="tab-btn px-4 py-3 text-sm text-gray-500 whitespace-nowrap cursor-pointer">服务项(2)</div>
                <div onclick="switchTab('costs')" class="tab-btn px-4 py-3 text-sm text-gray-500 whitespace-nowrap cursor-pointer">成本项(2)</div>
                <div onclick="switchTab('payments')" class="tab-btn px-4 py-3 text-sm text-gray-500 whitespace-nowrap cursor-pointer">到款明细</div>
                <div onclick="switchTab('files')" class="tab-btn px-4 py-3 text-sm text-gray-500 whitespace-nowrap cursor-pointer">成果物</div>
                <div onclick="switchTab('logs')" class="tab-btn px-4 py-3 text-sm text-gray-500 whitespace-nowrap cursor-pointer">操作日志</div>
            </div>
        </div>

        <div id="tab-content" class="min-h-[300px]">
            
            <div id="tab-samples" class="tab-pane block space-y-3">
                <div class="flex gap-2 mb-2">
                    <input type="text" placeholder="搜索样品编号/名称" class="flex-1 bg-white px-3 py-2 rounded-lg text-xs border border-transparent focus:border-blue-500 outline-none shadow-sm">
                    <button class="bg-white px-3 py-2 rounded-lg text-xs font-medium text-gray-600 shadow-sm"><i class="fas fa-filter mr-1"></i>筛选</button>
                </div>

                <div class="card border-l-4 border-orange-400 pl-4 py-3">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <div class="flex items-center gap-2">
                                <h3 class="font-bold text-gray-900 text-sm">激光测径仪</h3>
                                <span class="bg-gray-100 text-gray-500 text-[10px] px-1.5 py-0.5 rounded">非标准</span>
                            </div>
                            <p class="text-xs text-gray-400 font-mono mt-0.5">WT20260113001</p>
                        </div>
                        <span class="bg-orange-50 text-orange-500 border border-orange-100 text-[10px] px-2 py-0.5 rounded">待确认</span>
                    </div>
                    <div class="grid grid-cols-2 gap-y-1 text-xs text-gray-500 mb-3">
                        <div>数量: <span class="text-gray-900">1 台</span></div>
                        <div>范围: <span class="text-gray-900">(0-30) mm</span></div>
                    </div>
                    <div class="flex justify-end gap-2 pt-2 border-t border-gray-50">
                        <button class="text-gray-500 text-xs px-3 py-1 bg-gray-50 rounded-full">详情</button>
                        <button class="text-blue-600 text-xs px-3 py-1 bg-blue-50 rounded-full font-medium">费用录入</button>
                    </div>
                </div>

                <div class="card border-l-4 border-orange-400 pl-4 py-3">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <div class="flex items-center gap-2">
                                <h3 class="font-bold text-gray-900 text-sm">医用电子体温计</h3>
                                <span class="bg-blue-50 text-blue-500 text-[10px] px-1.5 py-0.5 rounded">标准器</span>
                            </div>
                            <p class="text-xs text-gray-400 font-mono mt-0.5">WT20260113002</p>
                        </div>
                        <span class="bg-orange-50 text-orange-500 border border-orange-100 text-[10px] px-2 py-0.5 rounded">待确认</span>
                    </div>
                    <div class="grid grid-cols-2 gap-y-1 text-xs text-gray-500 mb-3">
                        <div>数量: <span class="text-gray-900">3 套</span></div>
                        <div>范围: <span class="text-gray-900">(32-42) ℃</span></div>
                    </div>
                    <div class="flex justify-end gap-2 pt-2 border-t border-gray-50">
                        <button class="text-gray-500 text-xs px-3 py-1 bg-gray-50 rounded-full">详情</button>
                        <button class="text-blue-600 text-xs px-3 py-1 bg-blue-50 rounded-full font-medium">费用录入</button>
                    </div>
                </div>
            </div>

            <div id="tab-basic" class="tab-pane hidden">
                <div class="card space-y-4">
                    <h3 class="text-sm font-bold text-gray-800 border-l-4 border-blue-600 pl-2">基本信息</h3>
                    <div class="grid grid-cols-2 gap-4 text-xs">
                        <div class="space-y-1">
                            <span class="text-gray-400">主干委托单号</span>
                            <div class="text-gray-800 font-medium">WT20260126001</div>
                        </div>
                        <div class="space-y-1">
                            <span class="text-gray-400">LIMS委托单号</span>
                            <div class="text-gray-800 font-medium">MD20260126001</div>
                        </div>
                        <div class="col-span-2 space-y-1">
                            <span class="text-gray-400">客户名称</span>
                            <div class="text-gray-800 font-medium">华为技术有限公司</div>
                        </div>
                        <div class="space-y-1">
                            <span class="text-gray-400">联系人</span>
                            <div class="text-gray-800 font-medium">李明</div>
                        </div>
                        <div class="space-y-1">
                            <span class="text-gray-400">跟单人/部门</span>
                            <div class="text-gray-800 font-medium">张三 / 销售一部</div>
                        </div>
                    </div>

                    <h3 class="text-sm font-bold text-gray-800 border-l-4 border-blue-600 pl-2 mt-4">工期信息</h3>
                    <div class="grid grid-cols-2 gap-4 text-xs">
                         <div class="space-y-1">
                            <span class="text-gray-400">计划开始</span>
                            <div class="text-gray-800">2026-01-11</div>
                        </div>
                        <div class="space-y-1">
                            <span class="text-gray-400">计划完成</span>
                            <div class="text-gray-800">2026-05-21</div>
                        </div>
                        <div class="space-y-1">
                            <span class="text-gray-400">实际开工</span>
                            <div class="text-gray-800">2026-01-15</div>
                        </div>
                        <div class="space-y-1">
                            <span class="text-gray-400">实际完工</span>
                            <div class="text-gray-400">-</div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="tab-services" class="tab-pane hidden">
                <div class="card flex justify-between items-center mb-2 bg-blue-50 border border-blue-100">
                    <span class="text-xs text-gray-600">服务项合计 (2项)</span>
                    <div class="text-right">
                        <span class="block text-lg font-bold text-blue-600">¥ 6,023.00</span>
                        <span class="text-[10px] text-gray-400">税额: ¥417.38</span>
                    </div>
                </div>

                <div class="card p-0 overflow-hidden">
                    <div class="p-3 border-b border-gray-100 flex justify-between items-center">
                        <div class="flex flex-col">
                            <span class="text-sm font-bold text-gray-800">精密仪器校准服务</span>
                            <span class="text-[10px] text-gray-400 bg-gray-100 px-1 rounded w-fit mt-1">SV-001</span>
                        </div>
                        <div class="text-right">
                            <div class="font-bold">¥ 1,250.00</div>
                            <span class="text-[10px] text-blue-500 bg-blue-50 px-1 rounded">税率 6%</span>
                        </div>
                    </div>
                     <div class="p-3 flex justify-between items-center">
                        <div class="flex flex-col">
                            <span class="text-sm font-bold text-gray-800">现场环境检测费</span>
                            <span class="text-[10px] text-gray-400 bg-gray-100 px-1 rounded w-fit mt-1">SV-002</span>
                        </div>
                        <div class="text-right">
                            <div class="font-bold">¥ 800.00</div>
                            <span class="text-[10px] text-blue-500 bg-blue-50 px-1 rounded">税率 6%</span>
                        </div>
                    </div>
                </div>
            </div>

            <div id="tab-costs" class="tab-pane hidden">
                <div class="card flex justify-between items-center mb-2 bg-gray-50 border border-gray-200">
                    <span class="text-xs text-gray-600">成本支出总计</span>
                    <span class="text-lg font-bold text-gray-800">¥ 4,340.50</span>
                </div>

                <div class="card p-3">
                    <div class="flex justify-between items-start mb-2">
                        <div class="text-sm font-bold">市场开发费</div>
                        <span class="text-xs font-bold text-gray-900">¥ 3,500.00</span>
                    </div>
                    <div class="text-xs text-gray-500 mb-2">外付对象: <span class="text-red-500">待补充</span></div>
                    <div class="flex gap-2">
                        <span class="text-[10px] border border-blue-200 text-blue-600 px-1.5 rounded">企业分成</span>
                        <span class="text-[10px] border border-green-200 text-green-600 px-1.5 rounded">专票 13%</span>
                    </div>
                </div>

                <div class="card p-3">
                    <div class="flex justify-between items-start mb-2">
                        <div class="text-sm font-bold">分包A</div>
                        <span class="text-xs font-bold text-gray-900">¥ 840.50</span>
                    </div>
                    <div class="text-xs text-gray-500 mb-2 truncate">外付对象: 立创电子科技有限公司</div>
                    <div class="flex gap-2">
                        <span class="text-[10px] border border-blue-200 text-blue-600 px-1.5 rounded">分包</span>
                        <span class="text-[10px] border border-gray-200 text-gray-600 px-1.5 rounded">普票 6%</span>
                    </div>
                </div>
            </div>

            <div id="tab-payments" class="tab-pane hidden">
                <div class="bg-gradient-to-r from-blue-600 to-blue-500 rounded-xl p-4 text-white shadow-lg mb-4">
                    <div class="text-xs opacity-80 mb-1">当前资金池余额 (Balance)</div>
                    <div class="text-2xl font-bold mb-4">¥ 47,285.00</div>
                    <div class="flex gap-4 border-t border-white/20 pt-3">
                        <div>
                            <div class="text-[10px] opacity-70">累计到账</div>
                            <div class="text-sm font-bold">+72,387.00</div>
                        </div>
                        <div>
                            <div class="text-[10px] opacity-70">累计核销</div>
                            <div class="text-sm font-bold">-25,102.00</div>
                        </div>
                    </div>
                </div>

                <div class="text-sm font-bold text-gray-800 mb-2 pl-2 border-l-4 border-green-500">资金入账记录</div>
                <div class="card p-0">
                    <div class="p-3 border-b border-gray-100 flex justify-between items-center">
                        <div>
                            <div class="text-green-600 font-bold text-sm">+ 5,387.00</div>
                            <div class="text-[10px] text-gray-400">2026-01-23 08:29:46</div>
                        </div>
                        <span class="text-xs bg-green-50 text-green-600 px-2 py-1 rounded">已汇入</span>
                    </div>
                    <div class="p-3 flex justify-between items-center">
                        <div>
                            <div class="text-green-600 font-bold text-sm">+ 50,000.00</div>
                            <div class="text-[10px] text-gray-400">2026-02-01 09:30:00</div>
                        </div>
                        <span class="text-xs bg-green-50 text-green-600 px-2 py-1 rounded">已汇入</span>
                    </div>
                </div>
                
                <div class="text-sm font-bold text-gray-800 mb-2 pl-2 border-l-4 border-gray-500 mt-4">匹配扣减记录</div>
                <div class="card p-0">
                    <div class="p-3 border-b border-gray-100 flex justify-between">
                        <div>
                            <div class="text-xs font-bold text-gray-800 mb-1">WT723492 模拟样品匹配</div>
                            <div class="text-[10px] text-gray-400">2026-01-23 08:29:41</div>
                        </div>
                         <div class="text-gray-900 font-bold text-sm">- 2,277.00</div>
                    </div>
                     <div class="p-3 border-b border-gray-100 flex justify-between">
                        <div>
                            <div class="text-xs font-bold text-gray-800 mb-1">WT20260101 5G基站模块</div>
                            <div class="text-[10px] text-gray-400">2026-02-02 11:00:00</div>
                        </div>
                         <div class="text-gray-900 font-bold text-sm">- 8,000.00</div>
                    </div>
                </div>
            </div>

            <div id="tab-files" class="tab-pane hidden">
                <div class="card p-0">
                    <div class="p-3 border-b border-gray-100 flex items-center gap-3">
                        <div class="w-8 h-8 bg-blue-100 text-blue-600 rounded flex items-center justify-center text-xs font-bold">DOC</div>
                        <div class="flex-1 overflow-hidden">
                            <div class="text-sm text-gray-800 truncate">证书成果物A.doc</div>
                            <div class="text-[10px] text-gray-400">4.2 MB · 2026-10-11</div>
                        </div>
                        <i class="fas fa-download text-gray-400 text-sm p-2"></i>
                    </div>
                    <div class="p-3 border-b border-gray-100 flex items-center gap-3">
                        <div class="w-8 h-8 bg-green-100 text-green-600 rounded flex items-center justify-center text-xs font-bold">XLS</div>
                        <div class="flex-1 overflow-hidden">
                            <div class="text-sm text-gray-800 truncate">证书成果物B.xls</div>
                            <div class="text-[10px] text-gray-400">1.8 MB · 2026-10-11</div>
                        </div>
                        <i class="fas fa-download text-gray-400 text-sm p-2"></i>
                    </div>
                    <div class="p-3 flex items-center gap-3">
                        <div class="w-8 h-8 bg-red-100 text-red-600 rounded flex items-center justify-center text-xs font-bold">PDF</div>
                        <div class="flex-1 overflow-hidden">
                            <div class="text-sm text-gray-800 truncate">证书成果物C.pdf</div>
                            <div class="text-[10px] text-gray-400">9.4 MB · 2026-10-11</div>
                        </div>
                        <i class="fas fa-download text-gray-400 text-sm p-2"></i>
                    </div>
                </div>
            </div>

            <div id="tab-logs" class="tab-pane hidden pl-2">
                <div class="relative border-l-2 border-gray-200 ml-2 space-y-6 py-2">
                    <div class="relative pl-6">
                        <div class="absolute -left-[5px] top-1 w-2.5 h-2.5 bg-blue-500 rounded-full border-2 border-white"></div>
                        <div class="text-xs text-blue-600 font-bold mb-1">08-23 22:31</div>
                        <div class="bg-white p-3 rounded-lg shadow-sm">
                            <div class="flex items-center gap-2 mb-1">
                                <div class="w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center text-[10px] text-gray-600">赵</div>
                                <span class="text-xs text-gray-900 font-bold">赵小刚 (质量发起人)</span>
                            </div>
                            <div class="text-xs text-gray-600">创建任务</div>
                        </div>
                    </div>
                    <div class="relative pl-6">
                        <div class="absolute -left-[5px] top-1 w-2.5 h-2.5 bg-gray-300 rounded-full border-2 border-white"></div>
                        <div class="text-xs text-gray-400 font-bold mb-1">08-23 22:31</div>
                        <div class="bg-white p-3 rounded-lg shadow-sm">
                            <div class="flex items-center gap-2 mb-1">
                                <div class="w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center text-[10px] text-gray-600">刘</div>
                                <span class="text-xs text-gray-900 font-bold">刘辉 (技师)</span>
                            </div>
                            <div class="text-xs text-gray-600">接收子任务 <span class="text-blue-500">ZRW202507302765</span></div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <div class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-3 flex justify-between items-center z-40 pb-[calc(12px+env(safe-area-inset-bottom))]">
        <div class="flex flex-col items-center justify-center px-2 text-gray-500">
            <i class="fas fa-bars text-lg mb-0.5"></i>
            <span class="text-[10px]">更多</span>
        </div>
        <div class="flex gap-3 flex-1 ml-3 justify-end">
             <button onclick="toggleModal(true)" class="bg-blue-50 border border-blue-200 text-blue-600 px-4 py-2 rounded-lg text-sm font-medium shadow-sm active:bg-blue-100">
                <i class="fas fa-coins mr-1"></i>到款匹配
            </button>
            <button class="bg-blue-600 text-white px-5 py-2 rounded-lg text-sm font-medium shadow-md active:bg-blue-700">
                确认完工
            </button>
        </div>
    </div>

    <div id="matchModal" class="fixed inset-0 z-50 pointer-events-none opacity-0 flex items-end">
        <div class="absolute inset-0 bg-black/40 backdrop-blur-sm" onclick="toggleModal(false)"></div>
        
        <div id="matchContent" class="bg-[#F5F6F7] w-full rounded-t-2xl max-h-[85vh] flex flex-col relative z-10">
            
            <div class="bg-white rounded-t-2xl px-4 py-3 border-b border-gray-100 flex justify-between items-center sticky top-0">
                <div class="flex items-center gap-2">
                    <div class="w-8 h-8 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center">
                        <i class="fas fa-balance-scale"></i>
                    </div>
                    <span class="font-bold text-gray-900 text-base">费用匹配核销</span>
                </div>
                <button onclick="toggleModal(false)" class="text-gray-400 hover:text-gray-600 p-2">
                    <i class="fas fa-times text-lg"></i>
                </button>
            </div>

            <div class="bg-white p-4 mb-2 shadow-sm">
                <div class="flex justify-between items-center text-center">
                    <div class="flex-1">
                        <div class="text-[10px] text-gray-500 mb-1">本次可分配 (Pool)</div>
                        <div class="text-base font-bold text-gray-900">¥ 10,000.00</div>
                    </div>
                    <div class="text-gray-300 mx-2">-</div>
                    <div class="flex-1">
                        <div class="text-[10px] text-gray-500 mb-1">已选费用</div>
                        <div class="text-base font-bold text-blue-600">¥ <span id="selectedTotal">0.00</span></div>
                    </div>
                    <div class="text-gray-300 mx-2">=</div>
                    <div class="flex-1">
                        <div class="text-[10px] text-gray-500 mb-1">匹配后结余</div>
                        <div class="text-base font-bold text-green-600">¥ <span id="balanceTotal">10,000.00</span></div>
                    </div>
                </div>
            </div>

            <div class="overflow-y-auto p-3 space-y-2 pb-24 flex-1">
                <div class="flex justify-between items-center px-1 mb-2">
                    <span class="text-xs text-gray-500">待核销样品清单</span>
                    <span class="text-xs text-blue-600">已选: <span id="selectedCount">0</span> 项</span>
                </div>

                <label class="bg-white p-3 rounded-lg flex items-center gap-3 shadow-sm border border-transparent active:border-blue-500 transition-colors cursor-pointer select-none">
                    <input type="checkbox" class="checkbox-custom w-5 h-5 rounded border border-gray-300 appearance-none bg-white transition-all shrink-0" 
                           data-amount="5000" onchange="calculateTotal()">
                    <div class="flex-1">
                        <div class="flex justify-between">
                            <div class="font-bold text-sm text-gray-900">5G基站射频模块测试</div>
                            <div class="font-bold text-sm text-gray-900">¥ 5,000.00</div>
                        </div>
                        <div class="flex justify-between mt-1">
                            <span class="text-[10px] text-gray-400 bg-gray-100 px-1 rounded">S260122-01</span>
                            <span class="text-[10px] text-gray-400">未选</span>
                        </div>
                    </div>
                </label>

                <label class="bg-white p-3 rounded-lg flex items-center gap-3 shadow-sm border border-transparent active:border-blue-500 transition-colors cursor-pointer select-none">
                    <input type="checkbox" class="checkbox-custom w-5 h-5 rounded border border-gray-300 appearance-none bg-white transition-all shrink-0" 
                           data-amount="2000" onchange="calculateTotal()">
                    <div class="flex-1">
                        <div class="flex justify-between">
                            <div class="font-bold text-sm text-gray-900">高温老化环境测试</div>
                            <div class="font-bold text-sm text-gray-900">¥ 2,000.00</div>
                        </div>
                        <div class="flex justify-between mt-1">
                            <span class="text-[10px] text-gray-400 bg-gray-100 px-1 rounded">S260122-02</span>
                            <span class="text-[10px] text-gray-400">未选</span>
                        </div>
                    </div>
                </label>

                <label class="bg-white p-3 rounded-lg flex items-center gap-3 shadow-sm border border-transparent active:border-blue-500 transition-colors cursor-pointer select-none">
                    <input type="checkbox" class="checkbox-custom w-5 h-5 rounded border border-gray-300 appearance-none bg-white transition-all shrink-0" 
                           data-amount="2500" onchange="calculateTotal()">
                    <div class="flex-1">
                        <div class="flex justify-between">
                            <div class="font-bold text-sm text-gray-900">第三方防爆认证</div>
                            <div class="font-bold text-sm text-gray-900">¥ 2,500.00</div>
                        </div>
                        <div class="flex justify-between mt-1">
                            <span class="text-[10px] text-gray-400 bg-gray-100 px-1 rounded">S260122-03</span>
                            <span class="text-[10px] text-gray-400">未选</span>
                        </div>
                    </div>
                </label>

                 <label class="bg-white p-3 rounded-lg flex items-center gap-3 shadow-sm border border-transparent active:border-blue-500 transition-colors cursor-pointer select-none">
                    <input type="checkbox" class="checkbox-custom w-5 h-5 rounded border border-gray-300 appearance-none bg-white transition-all shrink-0" 
                           data-amount="3000" onchange="calculateTotal()">
                    <div class="flex-1">
                        <div class="flex justify-between">
                            <div class="font-bold text-sm text-gray-900">防水等级测试 IP68</div>
                            <div class="font-bold text-sm text-gray-900">¥ 3,000.00</div>
                        </div>
                        <div class="flex justify-between mt-1">
                            <span class="text-[10px] text-gray-400 bg-gray-100 px-1 rounded">S260122-04</span>
                            <span class="text-[10px] text-gray-400">未选</span>
                        </div>
                    </div>
                </label>
            </div>

            <div class="absolute bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 pb-[calc(16px+env(safe-area-inset-bottom))] flex gap-3 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]">
                <button onclick="toggleModal(false)" class="flex-1 py-3 bg-white border border-gray-300 text-gray-700 rounded-lg font-medium">取消</button>
                <button class="flex-1 py-3 bg-green-500 text-white rounded-lg font-medium shadow-md flex justify-center items-center gap-2">
                    <i class="fas fa-check"></i> 确认匹配提交
                </button>
            </div>
        </div>
    </div>

    <script>
        // Tab 切换逻辑
        function switchTab(tabId) {
            // 隐藏所有内容
            document.querySelectorAll('.tab-pane').forEach(el => el.classList.add('hidden'));
            document.querySelectorAll('.tab-pane').forEach(el => el.classList.remove('block'));
            
            // 移除所有 Tab 激活状态
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));

            // 显示目标内容
            document.getElementById('tab-' + tabId).classList.remove('hidden');
            document.getElementById('tab-' + tabId).classList.add('block');

            // 激活当前 Tab 样式
            event.currentTarget.classList.add('active');
            
            // 滚动 Tab 到可视区域 (UX优化)
            event.currentTarget.scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
        }

        // 模态框逻辑
        function toggleModal(show) {
            const modal = document.getElementById('matchModal');
            if (show) {
                modal.classList.add('active');
                // 禁止背景滚动
                document.body.style.overflow = 'hidden';
            } else {
                modal.classList.remove('active');
                document.body.style.overflow = '';
            }
        }

        // 费用计算逻辑
        function calculateTotal() {
            let total = 0;
            let count = 0;
            const pool = 10000;
            
            // 遍历所有选中的 checkbox
            document.querySelectorAll('.checkbox-custom:checked').forEach(checkbox => {
                total += parseFloat(checkbox.getAttribute('data-amount'));
                count++;
            });

            // 更新 UI
            document.getElementById('selectedTotal').innerText = total.toLocaleString('en-US', {minimumFractionDigits: 2});
            document.getElementById('balanceTotal').innerText = (pool - total).toLocaleString('en-US', {minimumFractionDigits: 2});
            document.getElementById('selectedCount').innerText = count;

            // 余额预警样式
            const balanceEl = document.getElementById('balanceTotal');
            if (pool - total < 0) {
                balanceEl.classList.remove('text-green-600');
                balanceEl.classList.add('text-red-600');
            } else {
                balanceEl.classList.remove('text-red-600');
                balanceEl.classList.add('text-green-600');
            }
        }
    </script>
</body>
</html>
