<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è´¦å·ç®¡ç† - èµ„é‡‘é¢„ç®—ç®¡ç†ç³»ç»Ÿ</title>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.3/dist/cdn.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        [x-cloak] { display: none !important; }
        body { 
            font-family: 'Inter', 'PingFang SC', 'Microsoft YaHei', system-ui, sans-serif; 
            background-color: #f8fafc; 
            color: #334155; 
        }
        .text-num { font-family: 'JetBrains Mono', 'Menlo', monospace; font-weight: 600; }
        .text-min { font-size: 13px; line-height: 1.5; }
        
        .custom-scroll::-webkit-scrollbar { width: 6px; height: 6px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        .custom-scroll::-webkit-scrollbar-track { background: transparent; }
        
        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            border: 1px solid #e2e8f0;
            transition: all 0.2s;
            cursor: pointer;
        }
        .stat-card:hover { transform: translateY(-2px); box-shadow: 0 10px 25px -5px rgba(0,0,0,0.08); }
        .stat-card.active { border-color: #3b82f6; box-shadow: 0 0 0 3px rgba(59,130,246,0.1); }
        
        .data-table th {
            background: #f8fafc;
            font-size: 12px;
            font-weight: 600;
            color: #64748b;
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
            white-space: nowrap;
        }
        .data-table td {
            padding: 14px 16px;
            border-bottom: 1px solid #f1f5f9;
            font-size: 14px;
            vertical-align: middle;
            transition: all 0.15s;
        }
        .data-table tr:hover td { background: #f8fafc; }
        
        .smart-input {
            width: 100%;
            border: 1px solid #e2e8f0;
            background: #fff;
            padding: 8px 12px;
            border-radius: 6px;
            outline: none;
            transition: all 0.2s;
            font-size: 14px;
        }
        .smart-input:hover { border-color: #94a3b8; }
        .smart-input:focus { border-color: #3b82f6; box-shadow: 0 0 0 3px rgba(59,130,246,0.1); }
        .smart-input:disabled { background-color: #f8fafc; cursor: not-allowed; color: #64748b; }
        
        .status-tag {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            white-space: nowrap;
        }
        .status-enabled { background: #d1fae5; color: #065f46; border: 1px solid #6ee7b7; }
        .status-disabled { background: #f1f5f9; color: #64748b; border: 1px solid #e2e8f0; }
        
        .slide-panel {
            position: fixed;
            top: 0;
            right: 0;
            width: 800px;
            height: 100vh;
            background: white;
            box-shadow: -10px 0 40px rgba(0,0,0,0.1);
            transform: translateX(100%);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 50;
            display: flex;
            flex-direction: column;
        }
        .slide-panel.open { transform: translateX(0); }
        .slide-overlay {
            position: fixed;
            inset: 0;
            background: rgba(15, 23, 42, 0.5);
            backdrop-filter: blur(4px);
            z-index: 40;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }
        .slide-overlay.open { opacity: 1; visibility: visible; }
        
        .btn-primary {
            background: #3b82f6;
            color: white;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
            border: none;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        .btn-primary:hover { background: #2563eb; }
        
        .btn-secondary {
            background: white;
            color: #475569;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
            border: 1px solid #e2e8f0;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        .btn-secondary:hover { background: #f8fafc; border-color: #cbd5e1; }
        
        .btn-success {
            background: #059669;
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.2s;
            border: none;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }
        .btn-success:hover { background: #047857; }
        
        .btn-danger {
            background: #dc2626;
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.2s;
            border: none;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }
        .btn-danger:hover { background: #b91c1c; }
        
        .action-link {
            color: #3b82f6;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
            padding: 4px 8px;
            border-radius: 4px;
            white-space: nowrap;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }
        .action-link:hover {
            color: #2563eb;
            background: #eff6ff;
            text-decoration: underline;
        }
        .action-link.danger { color: #dc2626; }
        .action-link.danger:hover { color: #b91c1c; background: #fee2e2; }
        
        .pagination-btn {
            padding: 6px 12px;
            border: 1px solid #e2e8f0;
            background: white;
            color: #475569;
            font-size: 13px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .pagination-btn:hover:not(:disabled) { border-color: #3b82f6; color: #3b82f6; }
        .pagination-btn.active { background: #3b82f6; color: white; border-color: #3b82f6; }
        .pagination-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        
        .toast {
            position: fixed;
            top: 24px;
            right: 24px;
            background: white;
            padding: 16px 20px;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            border-left: 4px solid;
            z-index: 100;
            transform: translateX(120%);
            transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        .toast.show { transform: translateX(0); }
        .toast.success { border-color: #10b981; }
        .toast.error { border-color: #ef4444; }
        
        .fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .form-section {
            background: #f8fafc;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }
        .form-section-title {
            font-size: 14px;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
    </style>
<base target="_blank">
</head>
<body class="h-screen flex flex-col overflow-hidden" x-data="accountManageApp()">

    <!-- é¡¶éƒ¨Header -->
    <header class="bg-white border-b border-slate-200 h-16 px-6 flex justify-between items-center shadow-sm z-30 flex-shrink-0">
        <div class="flex items-center gap-4">
            <div class="w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center shadow-lg shadow-blue-200">
                <i class="fa-solid fa-credit-card text-white text-lg"></i>
            </div>
            <div>
                <h1 class="text-lg font-bold text-slate-800">è´¦å·ç®¡ç†</h1>
                <div class="text-xs text-slate-500 mt-0.5">ç»´æŠ¤èµ„é‡‘æœºæ„é“¶è¡Œè´¦å·ä¿¡æ¯</div>
            </div>
        </div>
        
        <div class="flex items-center gap-3">
            <button @click="refreshData()" class="btn-secondary">
                <i class="fa-solid fa-rotate-right" :class="loading ? 'animate-spin' : ''"></i> åˆ·æ–°
            </button>
            <button @click="openEditModal()" class="btn-primary">
                <i class="fa-solid fa-plus"></i> æ–°å¢è´¦å·
            </button>
        </div>
    </header>

    <!-- Dashboard ç»Ÿè®¡åŒº -->
    <div class="bg-white border-b border-slate-200 px-6 py-5 grid grid-cols-2 md:grid-cols-4 gap-4 flex-shrink-0">
        <div class="stat-card flex items-center justify-between" :class="{'active': currentTab === 'all'}" @click="currentTab = 'all'">
            <div>
                <div class="text-xs text-slate-500 mb-1 font-medium">å…¨éƒ¨è´¦å·</div>
                <div class="text-2xl font-bold text-slate-800" x-text="stats.total">0</div>
            </div>
            <div class="w-12 h-12 rounded-full bg-slate-100 flex items-center justify-center text-slate-600">
                <i class="fa-solid fa-wallet text-xl"></i>
            </div>
        </div>
        
        <div class="stat-card flex items-center justify-between" :class="{'active': currentTab === 'enabled'}" @click="currentTab = 'enabled'">
            <div>
                <div class="text-xs text-slate-500 mb-1 font-medium">å·²å¯ç”¨</div>
                <div class="text-2xl font-bold text-emerald-600" x-text="stats.enabled">0</div>
            </div>
            <div class="w-12 h-12 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600">
                <i class="fa-solid fa-check-circle text-xl"></i>
            </div>
        </div>
        
        <div class="stat-card flex items-center justify-between" :class="{'active': currentTab === 'disabled'}" @click="currentTab = 'disabled'">
            <div>
                <div class="text-xs text-slate-500 mb-1 font-medium">å·²åœç”¨</div>
                <div class="text-2xl font-bold text-slate-600" x-text="stats.disabled">0</div>
            </div>
            <div class="w-12 h-12 rounded-full bg-slate-200 flex items-center justify-center text-slate-500">
                <i class="fa-solid fa-ban text-xl"></i>
            </div>
        </div>
        
        <div class="stat-card flex items-center justify-between border-amber-100 bg-amber-50">
            <div>
                <div class="text-xs text-amber-700 mb-1 font-medium">é“¶ä¼ç›´è”</div>
                <div class="text-2xl font-bold text-amber-700" x-text="stats.directLink">0</div>
            </div>
            <div class="w-12 h-12 rounded-full bg-amber-100 flex items-center justify-center text-amber-600">
                <i class="fa-solid fa-link text-xl"></i>
            </div>
        </div>
    </div>

    <!-- ä¸»ä½“å†…å®¹åŒº -->
    <main class="flex-1 overflow-hidden flex flex-col bg-slate-50">
        
        <!-- é«˜çº§ç­›é€‰æ  -->
        <div class="bg-white border-b border-slate-200 p-4 flex flex-wrap gap-3 items-end shadow-sm mx-6 mt-4 rounded-t-xl border-x border-t">
            <div class="flex-1 min-w-[180px]">
                <label class="block text-xs text-slate-500 mb-1.5 font-medium">æœºæ„åç§°</label>
                <select x-model="filters.orgName" class="smart-input">
                    <option value="">å…¨éƒ¨æœºæ„</option>
                    <template x-for="org in orgList" :key="org">
                        <option :value="org" x-text="org"></option>
                    </template>
                </select>
            </div>
            
            <div class="w-40">
                <label class="block text-xs text-slate-500 mb-1.5 font-medium">é“¶è¡Œåç§°</label>
                <input type="text" x-model="filters.bankName" placeholder="æœç´¢é“¶è¡Œ..." class="smart-input">
            </div>
            
            <div class="w-40">
                <label class="block text-xs text-slate-500 mb-1.5 font-medium">é“¶è¡Œè´¦å·</label>
                <input type="text" x-model="filters.accountNo" placeholder="æœç´¢è´¦å·..." class="smart-input text-num">
            </div>
            
            <div class="w-32">
                <label class="block text-xs text-slate-500 mb-1.5 font-medium">è´¦æˆ·çŠ¶æ€</label>
                <select x-model="filters.status" class="smart-input">
                    <option value="">å…¨éƒ¨</option>
                    <option value="enabled">å·²å¯ç”¨</option>
                    <option value="disabled">å·²åœç”¨</option>
                </select>
            </div>
            
            <div class="w-32">
                <label class="block text-xs text-slate-500 mb-1.5 font-medium">é“¶ä¼ç›´è”</label>
                <select x-model="filters.isDirectLink" class="smart-input">
                    <option value="">å…¨éƒ¨</option>
                    <option value="æ˜¯">æ˜¯</option>
                    <option value="å¦">å¦</option>
                </select>
            </div>
            
            <button @click="resetFilters()" class="btn-secondary mb-0.5 h-10">
                <i class="fa-solid fa-rotate-left mr-1"></i> é‡ç½®
            </button>
        </div>

        <!-- æ•°æ®è¡¨æ ¼ -->
        <div class="flex-1 bg-white overflow-hidden flex flex-col mx-6 mb-6 rounded-b-xl border border-slate-200 shadow-sm">
            <div class="overflow-auto custom-scroll flex-1">
                <table class="w-full data-table">
                    <thead class="sticky top-0 z-10">
                        <tr>
                            <th class="min-w-[200px]">æœºæ„åç§°</th>
                            <th class="min-w-[150px]">é“¶è¡Œåç§°</th>
                            <th class="min-w-[120px]">è´¦æˆ·åç§°</th>
                            <th class="min-w-[160px]">é“¶è¡Œè´¦å·</th>
                            <th class="w-28">è´¦æˆ·ç±»å‹</th>
                            <th class="w-24 text-center">é“¶ä¼ç›´è”</th>
                            <th class="w-24 text-center">NCæŸ¥è¯¢</th>
                            <th class="w-24">è´¦æˆ·ç”¨é€”</th>
                            <th class="w-24 text-center">å¸ç§</th>
                            <th class="w-28 text-center">è´¦æˆ·çŠ¶æ€</th>
                            <th class="w-40 text-center">æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <template x-for="(item, index) in paginatedData" :key="item.id">
                            <tr class="fade-in">
                                <td>
                                    <div class="flex items-center gap-3">
                                        <div class="w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-xs font-bold" x-text="item.orgName.charAt(0)"></div>
                                        <span class="font-medium text-slate-800" x-text="item.orgName"></span>
                                    </div>
                                </td>
                                <td class="text-slate-700" x-text="item.bankName"></td>
                                <td class="text-slate-700" x-text="item.accountName"></td>
                                <td class="text-num text-slate-600 text-min" x-text="item.accountNo"></td>
                                <td>
                                    <span class="px-2 py-1 bg-slate-100 text-slate-700 rounded text-xs border border-slate-200" x-text="item.accountType"></span>
                                </td>
                                <td class="text-center">
                                    <span class="text-xs px-2 py-1 rounded-full" :class="item.isDirectLink === 'æ˜¯' ? 'bg-emerald-100 text-emerald-700' : 'bg-slate-100 text-slate-600'" x-text="item.isDirectLink"></span>
                                </td>
                                <td class="text-center">
                                    <span class="text-xs px-2 py-1 rounded-full" :class="item.canQueryNC === 'æ˜¯' ? 'bg-blue-100 text-blue-700' : 'bg-slate-100 text-slate-600'" x-text="item.canQueryNC"></span>
                                </td>
                                <td class="text-slate-700 text-min" x-text="item.accountUsage"></td>
                                <td class="text-center text-min text-slate-600" x-text="item.currency"></td>
                                <td class="text-center">
                                    <span class="status-tag" :class="item.status === 'enabled' ? 'status-enabled' : 'status-disabled'">
                                        <i class="fa-solid fa-circle text-[8px]"></i>
                                        <span x-text="item.status === 'enabled' ? 'å·²å¯ç”¨' : 'å·²åœç”¨'"></span>
                                    </span>
                                </td>
                                <td class="text-center">
                                    <div class="flex items-center justify-center gap-2">
                                        <span class="action-link" @click="viewDetail(item)">
                                            <i class="fa-solid fa-eye"></i> æŸ¥çœ‹
                                        </span>
                                        <span class="action-link" @click="openEditModal(item)">
                                            <i class="fa-solid fa-pen"></i> å˜æ›´
                                        </span>
                                        <template x-if="item.status === 'disabled'">
                                            <button @click="enableItem(item)" class="btn-success text-xs px-2 py-1">
                                                å¯ç”¨
                                            </button>
                                        </template>
                                        <template x-if="item.status === 'enabled'">
                                            <button @click="disableItem(item)" class="btn-danger text-xs px-2 py-1">
                                                åœç”¨
                                            </button>
                                        </template>
                                    </div>
                                </td>
                            </tr>
                        </template>
                        
                        <!-- ç©ºçŠ¶æ€ -->
                        <tr x-show="paginatedData.length === 0">
                            <td colspan="11" class="text-center py-16 text-slate-400">
                                <div class="mb-4 text-4xl">ğŸ’³</div>
                                <div class="text-min mb-2">æš‚æ— é“¶è¡Œè´¦å·è®°å½•</div>
                                <button @click="openEditModal()" class="btn-primary mt-2">
                                    <i class="fa-solid fa-plus mr-1"></i> æ–°å¢è´¦å·
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- åˆ†é¡µ -->
            <div class="border-t border-slate-200 px-6 py-4 flex items-center justify-between bg-slate-50">
                <div class="text-xs text-slate-500">
                    æ˜¾ç¤º <span x-text="filteredData.length > 0 ? (currentPage - 1) * pageSize + 1 : 0" class="font-medium"></span> - 
                    <span x-text="Math.min(currentPage * pageSize, filteredData.length)" class="font-medium"></span> æ¡ï¼Œ
                    å…± <span x-text="filteredData.length" class="font-medium"></span> æ¡
                </div>
                <div class="flex gap-2">
                    <button @click="currentPage = 1" :disabled="currentPage === 1" class="pagination-btn">
                        <i class="fa-solid fa-angles-left"></i>
                    </button>
                    <button @click="currentPage--" :disabled="currentPage === 1" class="pagination-btn">
                        <i class="fa-solid fa-angle-left"></i>
                    </button>
                    
                    <template x-for="page in displayedPages" :key="page">
                        <button @click="currentPage = page" 
                                class="pagination-btn" 
                                :class="page === currentPage ? 'active' : ''"
                                x-text="page"></button>
                    </template>
                    
                    <button @click="currentPage++" :disabled="currentPage === totalPages" class="pagination-btn">
                        <i class="fa-solid fa-angle-right"></i>
                    </button>
                    <button @click="currentPage = totalPages" :disabled="currentPage === totalPages" class="pagination-btn">
                        <i class="fa-solid fa-angles-right"></i>
                    </button>
                </div>
                <div class="flex items-center gap-2 text-xs text-slate-500">
                    <select x-model.number="pageSize" @change="currentPage = 1" class="smart-input py-1 px-2 w-16 text-center">
                        <option value="10">10</option>
                        <option value="20">20</option>
                        <option value="50">50</option>
                    </select>
                    <span>æ¡/é¡µ</span>
                </div>
            </div>
        </div>
    </main>

    <!-- æ–°å¢/ç¼–è¾‘ä¾§æ»‘é¢æ¿ -->
    <div class="slide-overlay" :class="{'open': editModal.open}" @click="closeEditModal()"></div>
    <div class="slide-panel" :class="{'open': editModal.open}">
        <div class="flex flex-col h-full">
            <div class="px-6 py-4 border-b border-slate-200 flex justify-between items-center bg-slate-50">
                <div>
                    <h3 class="text-lg font-bold text-slate-800" x-text="editModal.isEdit ? 'å˜æ›´è´¦å·ä¿¡æ¯' : 'æ–°å¢é“¶è¡Œè´¦å·'"></h3>
                    <p class="text-xs text-slate-500 mt-1" x-text="editModal.isEdit ? 'ä¿®æ”¹è´¦å·ç›¸å…³ä¿¡æ¯' : 'å½•å…¥æ–°çš„é“¶è¡Œè´¦å·ä¿¡æ¯'"></p>
                </div>
                <button @click="closeEditModal()" class="text-slate-400 hover:text-slate-600 w-8 h-8 flex items-center justify-center rounded-full hover:bg-slate-200 transition text-xl">
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>
            
            <div class="flex-1 overflow-y-auto custom-scroll p-6">
                <form @submit.prevent="saveItem()" class="space-y-4">
                    <!-- åŸºç¡€ä¿¡æ¯ -->
                    <div class="form-section">
                        <div class="form-section-title">
                            <i class="fa-solid fa-building-columns text-blue-600"></i>
                            åŸºç¡€ä¿¡æ¯
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-2">
                                    æœºæ„åç§° <span class="text-red-500">*</span>
                                </label>
                                <select x-model="editModal.form.orgName" class="smart-input" :class="errors.orgName ? 'border-red-500' : ''" @change="validateField('orgName')" :disabled="editModal.isEdit">
                                    <option value="">è¯·é€‰æ‹©æœºæ„</option>
                                    <template x-for="org in orgList" :key="org">
                                        <option :value="org" x-text="org"></option>
                                    </template>
                                </select>
                                <p x-show="errors.orgName" class="text-xs text-red-500 mt-1" x-text="errors.orgName"></p>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-2">
                                    é“¶è¡Œåç§° <span class="text-red-500">*</span>
                                </label>
                                <input type="text" x-model="editModal.form.bankName" class="smart-input" :class="errors.bankName ? 'border-red-500' : ''" @blur="validateField('bankName')" placeholder="è¯·è¾“å…¥é“¶è¡Œåç§°">
                                <p x-show="errors.bankName" class="text-xs text-red-500 mt-1" x-text="errors.bankName"></p>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-2">
                                    è´¦æˆ·åç§° <span class="text-red-500">*</span>
                                </label>
                                <input type="text" x-model="editModal.form.accountName" class="smart-input" :class="errors.accountName ? 'border-red-500' : ''" @blur="validateField('accountName')" placeholder="è¯·è¾“å…¥è´¦æˆ·åç§°">
                                <p x-show="errors.accountName" class="text-xs text-red-500 mt-1" x-text="errors.accountName"></p>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-2">
                                    é“¶è¡Œè´¦å· <span class="text-red-500">*</span>
                                </label>
                                <input type="text" x-model="editModal.form.accountNo" class="smart-input text-num" :class="errors.accountNo ? 'border-red-500' : ''" @blur="validateField('accountNo')" placeholder="è¯·è¾“å…¥é“¶è¡Œè´¦å·">
                                <p x-show="errors.accountNo" class="text-xs text-red-500 mt-1" x-text="errors.accountNo"></p>
                            </div>
                        </div>
                    </div>

                    <!-- è´¦æˆ·å±æ€§ -->
                    <div class="form-section">
                        <div class="form-section-title">
                            <i class="fa-solid fa-sliders text-indigo-600"></i>
                            è´¦æˆ·å±æ€§
                        </div>
                        <div class="grid grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-2">
                                    è´¦æˆ·ç±»å‹ <span class="text-red-500">*</span>
                                </label>
                                <select x-model="editModal.form.accountType" class="smart-input" :class="errors.accountType ? 'border-red-500' : ''" @change="validateField('accountType')">
                                    <option value="">è¯·é€‰æ‹©</option>
                                    <option value="æ´»æœŸæˆ·">æ´»æœŸæˆ·</option>
                                    <option value="å®šæœŸæˆ·">å®šæœŸæˆ·</option>
                                    <option value="åŸºæœ¬æˆ·">åŸºæœ¬æˆ·</option>
                                    <option value="ä¸€èˆ¬æˆ·">ä¸€èˆ¬æˆ·</option>
                                    <option value="è´·æ¬¾æˆ·">è´·æ¬¾æˆ·</option>
                                    <option value="é›†å›¢å†…éƒ¨å­˜æ¬¾æˆ·">é›†å›¢å†…éƒ¨å­˜æ¬¾æˆ·</option>
                                    <option value="é›†å›¢å†…éƒ¨è´¦æˆ·">é›†å›¢å†…éƒ¨è´¦æˆ·</option>
                                    <option value="é›†å›¢å†…éƒ¨è´·æ¬¾æˆ·">é›†å›¢å†…éƒ¨è´·æ¬¾æˆ·</option>
                                    <option value="é›†å›¢å†…éƒ¨æ´»æœŸæˆ·">é›†å›¢å†…éƒ¨æ´»æœŸæˆ·</option>
                                    <option value="é›†å›¢å†…éƒ¨å®šæœŸæˆ·">é›†å›¢å†…éƒ¨å®šæœŸæˆ·</option>
                                </select>
                                <p x-show="errors.accountType" class="text-xs text-red-500 mt-1" x-text="errors.accountType"></p>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-2">ç»†åˆ†ç±»å‹</label>
                                <select x-model="editModal.form.subAccountType" class="smart-input">
                                    <option value="æ´»æœŸ">æ´»æœŸ</option>
                                    <option value="å®šæœŸ">å®šæœŸ</option>
                                    <option value="ç†è´¢">ç†è´¢</option>
                                    <option value="è´·æ¬¾">è´·æ¬¾</option>
                                    <option value="é›†å›¢å†…éƒ¨å­˜æ¬¾">é›†å›¢å†…éƒ¨å­˜æ¬¾</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-2">è´¦æˆ·ç”¨é€”</label>
                                <select x-model="editModal.form.accountUsage" class="smart-input">
                                    <option value="æ”¯å‡ºæˆ·">æ”¯å‡ºæˆ·</option>
                                    <option value="æ”¶å…¥æˆ·">æ”¶å…¥æˆ·</option>
                                    <option value="å†…éƒ¨æˆ·">å†…éƒ¨æˆ·</option>
                                    <option value="é¡¹ç›®ä¸“æˆ·">é¡¹ç›®ä¸“æˆ·</option>
                                    <option value="ä¸“é¡¹è´¦æˆ·">ä¸“é¡¹è´¦æˆ·</option>
                                    <option value="æ”¶æ¬¾æˆ·">æ”¶æ¬¾æˆ·</option>
                                    <option value="è´·æ¬¾æˆ·">è´·æ¬¾æˆ·</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-2">å¸ç§</label>
                                <select x-model="editModal.form.currency" class="smart-input">
                                    <option value="äººæ°‘å¸">äººæ°‘å¸</option>
                                    <option value="ç¾å…ƒ">ç¾å…ƒ</option>
                                    <option value="æ¬§å…ƒ">æ¬§å…ƒ</option>
                                    <option value="æ¸¯å¸">æ¸¯å¸</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-2">æ˜¯å¦ä¸ºé“¶ä¼ç›´è”æˆ·</label>
                                <select x-model="editModal.form.isDirectLink" class="smart-input">
                                    <option value="æ˜¯">æ˜¯</option>
                                    <option value="å¦">å¦</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-2">NCç³»ç»Ÿå¯æŸ¥ä½™é¢</label>
                                <select x-model="editModal.form.canQueryNC" class="smart-input">
                                    <option value="æ˜¯">æ˜¯</option>
                                    <option value="å¦">å¦</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- è”ç³»ä¿¡æ¯ -->
                    <div class="form-section">
                        <div class="form-section-title">
                            <i class="fa-solid fa-address-book text-emerald-600"></i>
                            è”ç³»ä¿¡æ¯
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-2">èµ„é‡‘ç®¡ç†å°ç»„å¯¹æ¥äºº</label>
                                <input type="text" x-model="editModal.form.contactPerson" class="smart-input" placeholder="è¯·è¾“å…¥å¯¹æ¥äººå§“å">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-2">å¯¹æ¥äººç”µè¯</label>
                                <input type="text" x-model="editModal.form.contactPhone" class="smart-input text-num" placeholder="è¯·è¾“å…¥è”ç³»ç”µè¯">
                            </div>
                        </div>
                    </div>

                    <!-- çŠ¶æ€ä¸å¤‡æ³¨ -->
                    <div class="form-section">
                        <div class="form-section-title">
                            <i class="fa-solid fa-circle-info text-amber-600"></i>
                            çŠ¶æ€ä¸å¤‡æ³¨
                        </div>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-2">è´¦æˆ·çŠ¶æ€</label>
                                <div class="flex gap-4">
                                    <label class="flex items-center gap-2 cursor-pointer p-3 rounded-lg border transition flex-1" 
                                           :class="editModal.form.status === 'enabled' ? 'border-emerald-500 bg-emerald-50' : 'border-slate-200 hover:border-emerald-300'">
                                        <input type="radio" x-model="editModal.form.status" value="enabled" class="w-4 h-4 text-emerald-600">
                                        <div>
                                            <div class="font-medium text-slate-800">å¯ç”¨</div>
                                            <div class="text-xs text-slate-500">å¯ç”¨äºèµ„é‡‘ä½™é¢å½•å…¥</div>
                                        </div>
                                    </label>
                                    <label class="flex items-center gap-2 cursor-pointer p-3 rounded-lg border transition flex-1"
                                           :class="editModal.form.status === 'disabled' ? 'border-slate-500 bg-slate-100' : 'border-slate-200 hover:border-slate-400'">
                                        <input type="radio" x-model="editModal.form.status" value="disabled" class="w-4 h-4 text-slate-600">
                                        <div>
                                            <div class="font-medium text-slate-800">åœç”¨</div>
                                            <div class="text-xs text-slate-500">æš‚æ—¶ä¸å‚ä¸èµ„é‡‘å½•å…¥</div>
                                        </div>
                                    </label>
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-2">å¤‡æ³¨</label>
                                <textarea x-model="editModal.form.remark" rows="3" class="smart-input resize-none" placeholder="è¯·è¾“å…¥å¤‡æ³¨ä¿¡æ¯..."></textarea>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            
            <div class="px-6 py-4 border-t border-slate-200 bg-slate-50 flex justify-end gap-3">
                <button @click="closeEditModal()" class="btn-secondary">å–æ¶ˆ</button>
                <button @click="saveItem()" class="btn-primary">
                    <i class="fa-solid fa-check"></i> <span x-text="editModal.isEdit ? 'ä¿å­˜å˜æ›´' : 'æäº¤ä¿å­˜'"></span>
                </button>
            </div>
        </div>
    </div>

    <!-- æŸ¥çœ‹è¯¦æƒ…ä¾§æ»‘é¢æ¿ -->
    <div class="slide-overlay" :class="{'open': viewModal.open}" @click="closeViewModal()"></div>
    <div class="slide-panel" :class="{'open': viewModal.open}">
        <div class="flex flex-col h-full" x-show="viewModal.item">
            <div class="px-6 py-4 border-b border-slate-200 flex justify-between items-center bg-slate-50">
                <div>
                    <h3 class="text-lg font-bold text-slate-800">è´¦å·è¯¦æƒ…</h3>
                    <p class="text-xs text-slate-500 mt-1">æŸ¥çœ‹é“¶è¡Œè´¦å·å®Œæ•´ä¿¡æ¯</p>
                </div>
                <button @click="closeViewModal()" class="text-slate-400 hover:text-slate-600 w-8 h-8 flex items-center justify-center rounded-full hover:bg-slate-200 transition text-xl">
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>
            
            <div class="flex-1 overflow-y-auto custom-scroll p-6">
                <div class="space-y-6">
                    <!-- çŠ¶æ€å¡ç‰‡ -->
                    <div class="p-4 rounded-lg border" :class="viewModal.item?.status === 'enabled' ? 'bg-emerald-50 border-emerald-200' : 'bg-slate-50 border-slate-200'">
                        <div class="flex items-center justify-between">
                            <div>
                                <div class="text-sm text-slate-500 mb-1">å½“å‰çŠ¶æ€</div>
                                <div class="text-lg font-bold" :class="viewModal.item?.status === 'enabled' ? 'text-emerald-700' : 'text-slate-700'" x-text="viewModal.item?.status === 'enabled' ? 'å·²å¯ç”¨' : 'å·²åœç”¨'"></div>
                            </div>
                            <div class="w-12 h-12 rounded-full flex items-center justify-center" :class="viewModal.item?.status === 'enabled' ? 'bg-emerald-100 text-emerald-600' : 'bg-slate-200 text-slate-500'">
                                <i class="fa-solid text-xl" :class="viewModal.item?.status === 'enabled' ? 'fa-check' : 'fa-ban'"></i>
                            </div>
                        </div>
                    </div>

                    <!-- åŸºç¡€ä¿¡æ¯ -->
                    <div>
                        <h4 class="text-sm font-bold text-slate-800 mb-3 border-b border-slate-200 pb-2 flex items-center gap-2">
                            <i class="fa-solid fa-building-columns text-blue-500"></i> åŸºç¡€ä¿¡æ¯
                        </h4>
                        <div class="space-y-3 text-sm">
                            <div class="flex justify-between py-2 border-b border-slate-100">
                                <span class="text-slate-500">æœºæ„åç§°</span>
                                <span class="font-medium text-slate-800" x-text="viewModal.item?.orgName"></span>
                            </div>
                            <div class="flex justify-between py-2 border-b border-slate-100">
                                <span class="text-slate-500">é“¶è¡Œåç§°</span>
                                <span class="font-medium text-slate-800" x-text="viewModal.item?.bankName"></span>
                            </div>
                            <div class="flex justify-between py-2 border-b border-slate-100">
                                <span class="text-slate-500">è´¦æˆ·åç§°</span>
                                <span class="font-medium text-slate-800" x-text="viewModal.item?.accountName"></span>
                            </div>
                            <div class="flex justify-between py-2 border-b border-slate-100">
                                <span class="text-slate-500">é“¶è¡Œè´¦å·</span>
                                <span class="font-mono font-medium text-slate-800" x-text="viewModal.item?.accountNo"></span>
                            </div>
                        </div>
                    </div>

                    <!-- è´¦æˆ·å±æ€§ -->
                    <div>
                        <h4 class="text-sm font-bold text-slate-800 mb-3 border-b border-slate-200 pb-2 flex items-center gap-2">
                            <i class="fa-solid fa-sliders text-indigo-500"></i> è´¦æˆ·å±æ€§
                        </h4>
                        <div class="grid grid-cols-2 gap-3 text-sm">
                            <div class="flex justify-between py-2 border-b border-slate-100">
                                <span class="text-slate-500">è´¦æˆ·ç±»å‹</span>
                                <span class="font-medium text-slate-800" x-text="viewModal.item?.accountType"></span>
                            </div>
                            <div class="flex justify-between py-2 border-b border-slate-100">
                                <span class="text-slate-500">ç»†åˆ†ç±»å‹</span>
                                <span class="font-medium text-slate-800" x-text="viewModal.item?.subAccountType"></span>
                            </div>
                            <div class="flex justify-between py-2 border-b border-slate-100">
                                <span class="text-slate-500">è´¦æˆ·ç”¨é€”</span>
                                <span class="font-medium text-slate-800" x-text="viewModal.item?.accountUsage"></span>
                            </div>
                            <div class="flex justify-between py-2 border-b border-slate-100">
                                <span class="text-slate-500">å¸ç§</span>
                                <span class="font-medium text-slate-800" x-text="viewModal.item?.currency"></span>
                            </div>
                            <div class="flex justify-between py-2 border-b border-slate-100">
                                <span class="text-slate-500">é“¶ä¼ç›´è”</span>
                                <span class="font-medium" :class="viewModal.item?.isDirectLink === 'æ˜¯' ? 'text-emerald-600' : 'text-slate-600'" x-text="viewModal.item?.isDirectLink"></span>
                            </div>
                            <div class="flex justify-between py-2 border-b border-slate-100">
                                <span class="text-slate-500">NCæŸ¥è¯¢</span>
                                <span class="font-medium" :class="viewModal.item?.canQueryNC === 'æ˜¯' ? 'text-blue-600' : 'text-slate-600'" x-text="viewModal.item?.canQueryNC"></span>
                            </div>
                        </div>
                    </div>

                    <!-- è”ç³»ä¿¡æ¯ -->
                    <div>
                        <h4 class="text-sm font-bold text-slate-800 mb-3 border-b border-slate-200 pb-2 flex items-center gap-2">
                            <i class="fa-solid fa-address-book text-emerald-500"></i> è”ç³»ä¿¡æ¯
                        </h4>
                        <div class="space-y-3 text-sm">
                            <div class="flex justify-between py-2 border-b border-slate-100">
                                <span class="text-slate-500">å¯¹æ¥äºº</span>
                                <span class="font-medium text-slate-800" x-text="viewModal.item?.contactPerson || '-'"></span>
                            </div>
                            <div class="flex justify-between py-2 border-b border-slate-100">
                                <span class="text-slate-500">è”ç³»ç”µè¯</span>
                                <span class="font-mono text-slate-800" x-text="viewModal.item?.contactPhone || '-'"></span>
                            </div>
                        </div>
                    </div>

                    <!-- æ—¶é—´ä¿¡æ¯ -->
                    <div>
                        <h4 class="text-sm font-bold text-slate-800 mb-3 border-b border-slate-200 pb-2 flex items-center gap-2">
                            <i class="fa-solid fa-clock text-amber-500"></i> æ—¶é—´è®°å½•
                        </h4>
                        <div class="space-y-3 text-sm">
                            <div class="flex justify-between py-2 border-b border-slate-100">
                                <span class="text-slate-500">åˆ›å»ºæ—¥æœŸ</span>
                                <span class="text-slate-800" x-text="viewModal.item?.createDate"></span>
                            </div>
                            <div class="flex justify-between py-2 border-b border-slate-100">
                                <span class="text-slate-500">æ›´æ–°æ—¥æœŸ</span>
                                <span class="text-slate-800" x-text="viewModal.item?.updateDate || '-'"></span>
                            </div>
                            <div class="flex justify-between py-2 border-b border-slate-100">
                                <span class="text-slate-500">æ“ä½œäºº</span>
                                <span class="text-slate-800" x-text="viewModal.item?.operator"></span>
                            </div>
                        </div>
                    </div>

                    <!-- å¤‡æ³¨ -->
                    <div x-show="viewModal.item?.remark">
                        <h4 class="text-sm font-bold text-slate-800 mb-3 border-b border-slate-200 pb-2">å¤‡æ³¨è¯´æ˜</h4>
                        <p class="text-sm text-slate-700 bg-slate-50 p-3 rounded-lg border border-slate-200" x-text="viewModal.item?.remark"></p>
                    </div>
                </div>
            </div>
            
            <div class="px-6 py-4 border-t border-slate-200 bg-slate-50 flex justify-between">
                <button @click="closeViewModal()" class="btn-secondary">å…³é—­</button>
                <div class="flex gap-2">
                    <button @click="openEditModal(viewModal.item); closeViewModal()" class="btn-primary">
                        <i class="fa-solid fa-pen"></i> å˜æ›´ä¿¡æ¯
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ç¡®è®¤å¼¹çª— -->
    <div x-show="confirmModal.open" class="fixed inset-0 z-[60] flex items-center justify-center modal-backdrop" x-cloak>
        <div class="bg-white w-full max-w-md rounded-xl shadow-2xl p-6 text-center fade-in">
            <div class="w-14 h-14 rounded-full flex items-center justify-center mx-auto mb-4" :class="confirmModal.type === 'danger' ? 'bg-red-100 text-red-500' : 'bg-emerald-100 text-emerald-500'">
                <i class="fa-solid text-2xl" :class="confirmModal.icon"></i>
            </div>
            <h3 class="text-lg font-bold text-slate-800 mb-2" x-text="confirmModal.title"></h3>
            <p class="text-sm text-slate-500 mb-6" x-text="confirmModal.message"></p>
            <div class="flex justify-center gap-3">
                <button @click="confirmModal.open = false" class="px-5 py-2 border border-slate-300 rounded-lg text-slate-700 text-sm font-medium hover:bg-slate-50 transition">å–æ¶ˆ</button>
                <button @click="executeConfirm()" :class="confirmModal.type === 'danger' ? 'btn-danger' : 'btn-success'" class="px-5 py-2 rounded-lg text-sm font-medium">
                    <span x-text="confirmModal.confirmText"></span>
                </button>
            </div>
        </div>
    </div>

    <!-- Toast æç¤º -->
    <div class="toast" :class="[toast.type, {'show': toast.show}]">
        <div class="flex items-center gap-3">
            <i class="fa-solid text-lg" :class="{
                'fa-check-circle text-emerald-500': toast.type === 'success',
                'fa-circle-exclamation text-red-500': toast.type === 'error'
            }"></i>
            <div>
                <div class="font-medium text-slate-800" x-text="toast.title"></div>
                <div class="text-xs text-slate-500 mt-0.5" x-text="toast.message" x-show="toast.message"></div>
            </div>
        </div>
    </div>

    <script>
        function accountManageApp() {
            return {
                loading: false,
                currentTab: 'all',
                currentPage: 1,
                pageSize: 10,
                
                filters: {
                    orgName: '',
                    bankName: '',
                    accountNo: '',
                    status: '',
                    isDirectLink: ''
                },
                
                orgList: [
                    'ä¸­æ£€è®¡é‡æœ‰é™å…¬å¸',
                    'ä¸­æ£€é›†å›¢æº¯æºæŠ€æœ¯æœåŠ¡æœ‰é™å…¬å¸',
                    'ä¸­æ£€ï¼ˆæ±Ÿè‹ï¼‰è®¡é‡æµ‹è¯•æœ‰é™å…¬å¸',
                    'ä¸­æ£€ååŒ—è®¡é‡æœ‰é™å…¬å¸',
                    'ä¸­æ£€ä¸–æ ‡ï¼ˆå—é€šï¼‰è®¡é‡æ£€æµ‹æœ‰é™å…¬å¸',
                    'ä¸­æ£€ï¼ˆå¹¿ä¸œï¼‰è®¡é‡æ£€æµ‹æŠ€æœ¯æœåŠ¡æœ‰é™å…¬å¸'
                ],
                
                dataList: [],
                
                editModal: {
                    open: false,
                    isEdit: false,
                    form: {
                        id: null,
                        orgName: '',
                        bankName: '',
                        accountName: '',
                        accountNo: '',
                        accountType: '',
                        subAccountType: 'æ´»æœŸ',
                        isDirectLink: 'å¦',
                        canQueryNC: 'å¦',
                        contactPerson: '',
                        contactPhone: '',
                        accountUsage: 'æ”¯å‡ºæˆ·',
                        currency: 'äººæ°‘å¸',
                        status: 'enabled',
                        remark: ''
                    }
                },
                
                viewModal: {
                    open: false,
                    item: null
                },
                
                confirmModal: {
                    open: false,
                    type: 'danger',
                    title: '',
                    message: '',
                    confirmText: 'ç¡®è®¤',
                    icon: 'fa-exclamation',
                    onConfirm: null
                },
                
                errors: {},
                toast: { show: false, type: 'success', title: '', message: '', timer: null },

                init() {
                    this.generateMockData();
                },

                generateMockData() {
                    const banks = ['ä¸­å›½å·¥å•†é“¶è¡Œ', 'ä¸­å›½å»ºè®¾é“¶è¡Œ', 'ä¸­å›½é“¶è¡Œ', 'ä¸­å›½å†œä¸šé“¶è¡Œ', 'æ‹›å•†é“¶è¡Œ', 'äº¤é€šé“¶è¡Œ'];
                    const data = [
                        {
                            id: 1,
                            orgName: 'ä¸­æ£€è®¡é‡æœ‰é™å…¬å¸',
                            bankName: 'ä¸­å›½å·¥å•†é“¶è¡Œè‚¡ä»½æœ‰é™å…¬å¸åŒ—äº¬ç”µä¿¡å¤§æ¥¼æ”¯è¡Œ',
                            accountName: 'ä¸­æ£€è®¡é‡æœ‰é™å…¬å¸',
                            accountNo: '0200235219100040680',
                            accountType: 'åŸºæœ¬æˆ·',
                            subAccountType: 'æ´»æœŸ',
                            isDirectLink: 'æ˜¯',
                            canQueryNC: 'æ˜¯',
                            contactPerson: 'ææ™“ä½³',
                            contactPhone: '13717954707',
                            accountUsage: 'æ”¯å‡ºæˆ·',
                            currency: 'äººæ°‘å¸',
                            status: 'enabled',
                            operator: 'å¼ è´¢åŠ¡',
                            createDate: '2024-01-15',
                            updateDate: '2024-01-15',
                            remark: 'ä¸»è´¦æˆ·'
                        },
                        {
                            id: 2,
                            orgName: 'ä¸­æ£€è®¡é‡æœ‰é™å…¬å¸',
                            bankName: 'ä¸­å›½å·¥å•†é“¶è¡Œè‚¡ä»½æœ‰é™å…¬å¸åŒ—äº¬ç¯å¸‚å£æ”¯è¡Œ',
                            accountName: 'ä¸­æ£€è®¡é‡æœ‰é™å…¬å¸',
                            accountNo: '0200209419200020807',
                            accountType: 'ä¸€èˆ¬æˆ·',
                            subAccountType: 'æ´»æœŸ',
                            isDirectLink: 'æ˜¯',
                            canQueryNC: 'æ˜¯',
                            contactPerson: 'ææ™“ä½³',
                            contactPhone: '13717954707',
                            accountUsage: 'æ”¶å…¥æˆ·',
                            currency: 'äººæ°‘å¸',
                            status: 'enabled',
                            operator: 'å¼ è´¢åŠ¡',
                            createDate: '2024-01-15',
                            updateDate: '2024-01-20',
                            remark: ''
                        },
                        {
                            id: 3,
                            orgName: 'ä¸­æ£€è®¡é‡æœ‰é™å…¬å¸',
                            bankName: 'ä¸­æ£€è®¡é‡æœ‰é™å…¬å¸å†…éƒ¨æ´»æœŸæˆ·',
                            accountName: 'ä¸­æ£€è®¡é‡æœ‰é™å…¬å¸',
                            accountNo: '109-00-001',
                            accountType: 'é›†å›¢å†…éƒ¨å­˜æ¬¾æˆ·',
                            subAccountType: 'é›†å›¢å†…éƒ¨å­˜æ¬¾',
                            isDirectLink: 'å¦',
                            canQueryNC: 'æ˜¯',
                            contactPerson: 'ææ™“ä½³',
                            contactPhone: '13717954707',
                            accountUsage: 'å†…éƒ¨æˆ·',
                            currency: 'äººæ°‘å¸',
                            status: 'enabled',
                            operator: 'ç³»ç»ŸåŒæ­¥',
                            createDate: '2024-01-10',
                            updateDate: '',
                            remark: 'å†…éƒ¨æˆ·'
                        },
                        {
                            id: 4,
                            orgName: 'ä¸­æ£€ï¼ˆæ±Ÿè‹ï¼‰è®¡é‡æµ‹è¯•æœ‰é™å…¬å¸',
                            bankName: 'ä¸­å›½é“¶è¡Œè‚¡ä»½æœ‰é™å…¬å¸è‹å·æœ¨æ¸æ”¯è¡Œ',
                            accountName: 'ä¸­æ£€ï¼ˆæ±Ÿè‹ï¼‰è®¡é‡æµ‹è¯•æœ‰é™å…¬å¸',
                            accountNo: '506676647371',
                            accountType: 'åŸºæœ¬æˆ·',
                            subAccountType: 'æ´»æœŸ',
                            isDirectLink: 'æ˜¯',
                            canQueryNC: 'æ˜¯',
                            contactPerson: 'ç‹ç„¶',
                            contactPhone: '18068284380',
                            accountUsage: 'æ”¯å‡ºæˆ·',
                            currency: 'äººæ°‘å¸',
                            status: 'enabled',
                            operator: 'æä¼šè®¡',
                            createDate: '2024-01-12',
                            updateDate: '',
                            remark: ''
                        },
                        {
                            id: 5,
                            orgName: 'ä¸­æ£€è¥¿å—è®¡é‡æœ‰é™å…¬å¸',
                            bankName: 'ä¸­å›½é“¶è¡Œè‚¡ä»½æœ‰é™å…¬å¸æ˜†æ˜å¸‚æ»‡æ± è·¯æ”¯è¡Œ',
                            accountName: 'ä¸­æ£€è¥¿å—è®¡é‡æœ‰é™å…¬å¸',
                            accountNo: '134035776833',
                            accountType: 'åŸºæœ¬æˆ·',
                            subAccountType: 'æ´»æœŸ',
                            isDirectLink: 'æ˜¯',
                            canQueryNC: 'æ˜¯',
                            contactPerson: 'æç«¹æ—',
                            contactPhone: '18487166731',
                            accountUsage: 'ä»˜æ¬¾æˆ·',
                            currency: 'äººæ°‘å¸',
                            status: 'disabled',
                            operator: 'ç‹ä¸»ç®¡',
                            createDate: '2024-01-08',
                            updateDate: '2024-02-01',
                            remark: 'è´¦æˆ·å˜æ›´åœç”¨'
                        }
                    ];
                    
                    // ç”Ÿæˆæ›´å¤šéšæœºæ•°æ®
                    for (let i = 6; i <= 15; i++) {
                        data.push({
                            id: i,
                            orgName: this.orgList[Math.floor(Math.random() * this.orgList.length)],
                            bankName: banks[Math.floor(Math.random() * banks.length)] + 'æ”¯è¡Œ',
                            accountName: 'æµ‹è¯•è´¦æˆ·' + i,
                            accountNo: Math.random().toString().slice(2, 20),
                            accountType: ['åŸºæœ¬æˆ·', 'ä¸€èˆ¬æˆ·', 'æ´»æœŸæˆ·'][Math.floor(Math.random() * 3)],
                            subAccountType: 'æ´»æœŸ',
                            isDirectLink: Math.random() > 0.5 ? 'æ˜¯' : 'å¦',
                            canQueryNC: Math.random() > 0.3 ? 'æ˜¯' : 'å¦',
                            contactPerson: 'è”ç³»äºº' + i,
                            contactPhone: '1380013800' + i,
                            accountUsage: ['æ”¯å‡ºæˆ·', 'æ”¶å…¥æˆ·', 'å†…éƒ¨æˆ·'][Math.floor(Math.random() * 3)],
                            currency: 'äººæ°‘å¸',
                            status: Math.random() > 0.2 ? 'enabled' : 'disabled',
                            operator: 'å¼ è´¢åŠ¡',
                            createDate: '2024-01-' + (10 + i),
                            updateDate: '',
                            remark: ''
                        });
                    }
                    
                    this.dataList = data;
                },

                get stats() {
                    return {
                        total: this.dataList.length,
                        enabled: this.dataList.filter(d => d.status === 'enabled').length,
                        disabled: this.dataList.filter(d => d.status === 'disabled').length,
                        directLink: this.dataList.filter(d => d.isDirectLink === 'æ˜¯').length
                    };
                },

                get filteredData() {
                    let data = this.dataList.filter(item => {
                        if (this.currentTab === 'enabled' && item.status !== 'enabled') return false;
                        if (this.currentTab === 'disabled' && item.status !== 'disabled') return false;
                        
                        if (this.filters.orgName && !item.orgName.includes(this.filters.orgName)) return false;
                        if (this.filters.bankName && !item.bankName.includes(this.filters.bankName)) return false;
                        if (this.filters.accountNo && !item.accountNo.includes(this.filters.accountNo)) return false;
                        if (this.filters.status && item.status !== this.filters.status) return false;
                        if (this.filters.isDirectLink && item.isDirectLink !== this.filters.isDirectLink) return false;
                        
                        return true;
                    });
                    
                    data.sort((a, b) => new Date(b.createDate) - new Date(a.createDate));
                    return data;
                },

                get paginatedData() {
                    const start = (this.currentPage - 1) * this.pageSize;
                    return this.filteredData.slice(start, start + this.pageSize);
                },

                get totalPages() {
                    return Math.ceil(this.filteredData.length / this.pageSize) || 1;
                },

                get displayedPages() {
                    const pages = [];
                    const maxDisplay = 5;
                    let start = Math.max(1, this.currentPage - 2);
                    let end = Math.min(this.totalPages, start + maxDisplay - 1);
                    if (end - start < maxDisplay - 1) start = Math.max(1, end - maxDisplay + 1);
                    for (let i = start; i <= end; i++) pages.push(i);
                    return pages;
                },

                resetFilters() {
                    this.filters = {
                        orgName: '',
                        bankName: '',
                        accountNo: '',
                        status: '',
                        isDirectLink: ''
                    };
                    this.currentPage = 1;
                },

                openEditModal(item = null) {
                    this.errors = {};
                    if (item) {
                        this.editModal.isEdit = true;
                        this.editModal.form = { ...item };
                    } else {
                        this.editModal.isEdit = false;
                        this.editModal.form = {
                            id: null,
                            orgName: '',
                            bankName: '',
                            accountName: '',
                            accountNo: '',
                            accountType: '',
                            subAccountType: 'æ´»æœŸ',
                            isDirectLink: 'å¦',
                            canQueryNC: 'å¦',
                            contactPerson: '',
                            contactPhone: '',
                            accountUsage: 'æ”¯å‡ºæˆ·',
                            currency: 'äººæ°‘å¸',
                            status: 'enabled',
                            remark: ''
                        };
                    }
                    this.editModal.open = true;
                },

                closeEditModal() {
                    this.editModal.open = false;
                    setTimeout(() => {
                        this.editModal.isEdit = false;
                        this.errors = {};
                    }, 300);
                },

                validateField(field) {
                    const value = this.editModal.form[field];
                    if (!value || value.trim() === '') {
                        const labels = {
                            orgName: 'æœºæ„åç§°',
                            bankName: 'é“¶è¡Œåç§°',
                            accountName: 'è´¦æˆ·åç§°',
                            accountNo: 'é“¶è¡Œè´¦å·',
                            accountType: 'è´¦æˆ·ç±»å‹'
                        };
                        this.errors[field] = `è¯·è¾“å…¥${labels[field]}`;
                        return false;
                    }
                    this.errors[field] = '';
                    return true;
                },

                validateForm() {
                    const fields = ['orgName', 'bankName', 'accountName', 'accountNo', 'accountType'];
                    let valid = true;
                    fields.forEach(field => {
                        if (!this.validateField(field)) valid = false;
                    });
                    return valid;
                },

                saveItem() {
                    if (!this.validateForm()) {
                        this.showToast('è¯·å®Œå–„å¿…å¡«é¡¹', 'error');
                        return;
                    }

                    const today = new Date().toISOString().split('T')[0];
                    const formData = { ...this.editModal.form };

                    if (this.editModal.isEdit) {
                        const index = this.dataList.findIndex(d => d.id === formData.id);
                        if (index > -1) {
                            this.dataList[index] = { 
                                ...this.dataList[index], 
                                ...formData,
                                updateDate: today
                            };
                            this.showToast('å˜æ›´æˆåŠŸ', 'success', 'è´¦å·ä¿¡æ¯å·²æ›´æ–°');
                        }
                    } else {
                        // æ£€æŸ¥è´¦å·é‡å¤
                        const exists = this.dataList.some(d => d.accountNo === formData.accountNo);
                        if (exists) {
                            this.showToast('ä¿å­˜å¤±è´¥', 'error', 'è¯¥é“¶è¡Œè´¦å·å·²å­˜åœ¨');
                            return;
                        }
                        
                        formData.id = Date.now();
                        formData.operator = 'å½“å‰ç”¨æˆ·';
                        formData.createDate = today;
                        formData.updateDate = '';
                        this.dataList.unshift(formData);
                        this.showToast('æ–°å¢æˆåŠŸ', 'success', 'é“¶è¡Œè´¦å·å·²æ·»åŠ ');
                    }
                    
                    this.closeEditModal();
                },

                viewDetail(item) {
                    this.viewModal.item = item;
                    this.viewModal.open = true;
                },

                closeViewModal() {
                    this.viewModal.open = false;
                    setTimeout(() => {
                        this.viewModal.item = null;
                    }, 300);
                },

                enableItem(item) {
                    this.confirmModal = {
                        open: true,
                        type: 'success',
                        title: 'ç¡®è®¤å¯ç”¨è´¦å·ï¼Ÿ',
                        message: `å¯ç”¨åï¼Œ${item.bankName} çš„è´¦å·å°†å¯ç”¨äºèµ„é‡‘ä½™é¢å½•å…¥ã€‚`,
                        confirmText: 'ç¡®è®¤å¯ç”¨',
                        icon: 'fa-check',
                        onConfirm: () => {
                            item.status = 'enabled';
                            item.updateDate = new Date().toISOString().split('T')[0];
                            this.showToast('å¯ç”¨æˆåŠŸ', 'success', 'è¯¥è´¦å·å·²å¯ç”¨');
                            this.confirmModal.open = false;
                        }
                    };
                },

                disableItem(item) {
                    this.confirmModal = {
                        open: true,
                        type: 'danger',
                        title: 'ç¡®è®¤åœç”¨è´¦å·ï¼Ÿ',
                        message: `åœç”¨åï¼Œ${item.bankName} çš„è´¦å·å°†æ— æ³•ç”¨äºèµ„é‡‘ä½™é¢å½•å…¥ï¼Œå·²æœ‰æ•°æ®ä¸å—å½±å“ã€‚`,
                        confirmText: 'ç¡®è®¤åœç”¨',
                        icon: 'fa-ban',
                        onConfirm: () => {
                            item.status = 'disabled';
                            item.updateDate = new Date().toISOString().split('T')[0];
                            this.showToast('åœç”¨æˆåŠŸ', 'success', 'è¯¥è´¦å·å·²åœç”¨');
                            this.confirmModal.open = false;
                        }
                    };
                },

                executeConfirm() {
                    if (this.confirmModal.onConfirm) {
                        this.confirmModal.onConfirm();
                    }
                },

                refreshData() {
                    this.loading = true;
                    setTimeout(() => {
                        this.loading = false;
                        this.showToast('æ•°æ®å·²åˆ·æ–°', 'success');
                    }, 800);
                },

                showToast(title, type = 'success', message = '') {
                    if (this.toast.timer) clearTimeout(this.toast.timer);
                    this.toast = { show: true, type, title, message };
                    this.toast.timer = setTimeout(() => {
                        this.toast.show = false;
                    }, 3000);
                }
            }
        }
    </script>
</body>
</html>
